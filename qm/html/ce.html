<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QM: Code Engineering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="spexy-awesome.css" rel="stylesheet" type="text/css"/>
<link href="qm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.webp"/></a>
  </div>
   <div id="projectname">
    QM
    &nbsp;<span id="projectnumber">7.0.1</span>
   </div>
   <div id="projectbrief">Model-Based Design Tool</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('ce.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Code Engineering</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="sm_hist.html">Working with Transitions to History</a></span><span class="next_button"><a class="el" href="ce_dir.html">Working with Directories</a></span></p>
<p>This Code Engineering section covers the following subjects:</p><ul>
<li><a class="el" href="#ce_phys">Physical Design</a></li>
<li><a class="el" href="#ce_misra">Compliance with MISRA-C/C++</a></li>
<li><a class="el" href="ce_dir.html">Working with Directories</a></li>
<li><a class="el" href="ce_file.html">Working with Files</a></li>
<li><a class="el" href="ce_gen.html">Code Generation</a></li>
<li><a class="el" href="ce_sm.html">Generating Code for State Machines</a></li>
<li><a class="el" href="ce_comment.html">Generating Comments</a></li>
<li><a class="el" href="ce_cond.html">Conditional Compilation</a></li>
<li><a class="el" href="ce_qmc.html">QM Compiler (qmc)</a></li>
</ul>
<p><a class="anchor" id="idx_ce"></a> Code engineering** is the process of designing, implementing, and maintaining source code. This section describes how QM can assist you in this process by providing a unique approach to modeling the structure and content of the <b>generated source code</b>, also known as the "physical design" as defined below:</p>
<dl class="section note"><dt>Note</dt><dd><b>Physical design</b> is the decomposition of the source code into directories and files, such as header files (<code>.h</code> files) and implementation files (<code>.c</code> or <code>.cpp</code> files), as well as "makefiles", build scripts, etc. The critical aspect of physical design is managing the inter-dependencies among the source code modules, as well as an information hiding policy to expose only the desired interfaces in the header files. Additionally, physical design of automatically generated source code must also afford a sufficiently flexible way of interfacing with hand-crafted code or any existing 3rd-party code.</dd></dl>
<h1><a class="anchor" id="ce_phys"></a>
Physical Design</h1>
<p>In QM, directories and files are first-class model elements, so the <b>physical design</b> is an integral part of the model, just as the logical design is. This approach makes QM a unique tool on the market that allows you to <b>explicitly</b> perform physical design of the generated code as an integral part of the modeling process (as opposed to tweaking the code generator or adjusting hundreds of parameters of a "model compiler").</p>
<dl class="section remark"><dt>Remarks</dt><dd>If you have used other modeling tools, the QM approach might feel like <a href="https://www.state-machine.com/turning-automatic-code-generation-upside-down" target="_blank" rel="noopener">turning automatic code generation upside down&uarr;</a> because QM does not impose any code structure by itself, but rather gives <b>you</b> the complete control of what is being generated. In contrast, most other modeling tools on the market use an implicit and inflexible physical design, in which, for example, each <a class="el" href="bm_class.html">class</a> generates a <code>&lt;class-name&gt;.h</code> header file and <code>&lt;class-name&gt;.c/.cpp</code> implementation file.</dd></dl>
<p><a class="anchor" id="ce_temp"></a>The main enabler of the explicit physical design is representing directories and files as <em>model items</em> that can be added to the model and edited as any other parts of the model. But, it is critical to understand that the <a class="el" href="ce_dir.html">directories</a> and <a class="el" href="ce_file.html">files</a> in the model are <b>not</b> the actual directories and files on disk. Rather, you should think of these model items as "templates" that the QM code generator uses to create the actual directories and files on your disk. (The word "template" here should not be confused with the "C++ templates"!)</p>
<dl class="section note"><dt>Note</dt><dd>QM supports also <a class="el" href="ce_file.html#ce_file_extern">External Files</a>, which combine the user-provided code with sections of generated-code. This merging of a file-template with generated-code is achieved by clearly delimiting the generated-sections with special comments. Such <em>External Files</em> can be edited inside any editor/IDE of choice and are <b>not</b> editable inside QM.</dd></dl>
<p>The following picture shows an example of a directory-"template" and some file-"templates" in QM. The file-"template" is shown both in the <a class="el" href="ui_explorer.html">Model Explorer</a> and in the <a class="el" href="ui_mdi.html">MDI</a> window:</p>
<div class="image">
<img src="ce_phys.png" alt=""/>
</div>
 <div class="caption"><center><em>Directory and file templates in a QM model</em></center></div><p>The following picture shows how the directory-"template" and file-"templates" in the model generate the physical directory and files on disk. The code generation process is depicted as arrows from the model items to the files on disk.</p>
<div class="image">
<img src="ce_disk.png" alt=""/>
</div>
 <div class="caption"><center><em>Code generation uses the directory and file templates to create directories and files on disk</em></center></div><dl class="section note"><dt>Note</dt><dd>The model items for modeling directories and files were called in this section directory-"template" and file-"template", respectively, so that you can get used to distinguishing the model items from the physical directories and files on your disk. In the following sections, however, the model items will be simply referred to <a class="el" href="ce_dir.html">directories</a> and <a class="el" href="ce_file.html">files</a>, with the understanding that a model can hold only the "templates" for directories and files.</dd></dl>
<h1><a class="anchor" id="ce_misra"></a>
Compliance with MISRA-C/C++</h1>
<p>The parts of code generated by QM are compliant with the industry safe coding standards for C and C++. Specifically, the QM code generator for the C language emits code compliant with the <a href="https://misra.org.uk/product/misra-c2023" target="_blank" rel="noopener">MISRA-C:2023&uarr;</a> and the QM code generator for the C++ language emits code compliant with the <a href="https://misra.org.uk/product/misra-cpp2023" target="_blank" rel="noopener">MISRA-C++:2023&uarr;</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Of course, the compliance with any coding standard, such as MISRA, can be guaranteed only for parts of code actually created by the tool. The other parts of the code, such as code copied from the <a class="el" href="ce_file.html">file-templates</a> or action code attached to <a class="el" href="sm.html">state machines</a>, is provided externally to the tool. Such code might not be compliant with the MISRA rules.</dd></dl>
<p><span class="prev_button"><a class="el" href="sm_hist.html">Working with Transitions to History</a></span><span class="next_button"><a class="el" href="ce_dir.html">Working with Directories</a></span> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QM 7.0.1</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QM 7.0.1</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
