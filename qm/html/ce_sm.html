<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QM: Generating Code for State Machines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="spexy-awesome.css" rel="stylesheet" type="text/css"/>
<link href="qm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.webp"/></a>
  </div>
   <div id="projectname">
    QM
    &nbsp;<span id="projectnumber">7.0.1</span>
   </div>
   <div id="projectbrief">Model-Based Design Tool</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('ce_sm.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Generating Code for State Machines</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="ce_define1.html">$define1</a></span><span class="next_button"><a class="el" href="ce_comment.html">Generating Comments</a></span></p>
<p>As described in Section <a class="el" href="sm.html">State Machines</a>, QM provides extensive support for modern <a href="https://www.state-machine.com/fsm#HSM" target="_blank" rel="noopener">Hierarchical State Machines (HSMs)&uarr;</a> (UML Statecharts). From the code engineering point of view, state machines are the most "constructive" element of the UML and the support of state machine code generation is the most valuable aspect of QM. This section describes the state machine implementation strategies and coding aspects for hierarchical state machines in C and C++.</p>
<div class="image">
<img src="ce_sm.png" alt=""/>
</div>
  <div class="caption"><center><em>Class <code>ToastOven</code> with a hierarchical state machine used in the following examples of code generation</em></center></div><h1><a class="anchor" id="ce_sm_stra"></a>
Implementation Strategies</h1>
<p>As described in Section <a class="el" href="sm.html#sm_class">State Machine Base Classes</a>, QM supports two <b>state machine implementation strategies</b>, depending on the selected <a class="el" href="sm.html#sm_class">base class</a> for the application-level state machine:</p><ul>
<li><a class="el" href="sm.html#sm_class_qhsm">QHsm-Based State Machines</a> optimized for highest readability of the generated code at some efficiency cost, compared to the next strategy;</li>
<li><a class="el" href="sm.html#sm_class_qmsm">QMsm/QMActive-Based State Machines</a> optimized for the highest performance at slightly less readable generated code.</li>
</ul>
<h2><a class="anchor" id="ce_sm_ctor"></a>
State Machine Constructor</h2>
<p>Apart from selecting the <code>superclass</code> (base class) in the Class Property Sheet, the constructor of the application-level state machine must call the appropriate base class constructor. For example, a state machine class derived from <code>QHsm</code> must call the <code>QHsm</code> constructor and class derived from <code>QMActive</code> must call <code>QMActive</code> constructor.</p>
<h3><a class="anchor" id="ce_sm_ctor-c"></a>
State Machine Constructor in C</h3>
<p>The Section <a class="el" href="bm_oper-class.html#bm_class-ctor-c">Class Constructors in C</a> describes how to model class constructors in C. has been described in the B</p>
<h3><a class="anchor" id="ce_sm_ctor-cpp"></a>
State Machine Constructor in C++</h3>
<h1><a class="anchor" id="ce_sm_act"></a>
Action Code</h1>
<h2><a class="anchor" id="ce_sm_act-c"></a>
Action Code in C</h2>
<h3><a class="anchor" id="ce_sm_act-c-attr"></a>
Accessing Attributes</h3>
<h3><a class="anchor" id="ce_sm_act-c-par"></a>
Accessing Event Parameters</h3>
<h2><a class="anchor" id="ce_sm_act-cpp"></a>
Action Code in C++</h2>
<h3><a class="anchor" id="ce_sm_act-cpp-attr"></a>
Accessing Attributes</h3>
<h3><a class="anchor" id="ce_sm_act-cpp-par"></a>
Accessing Event Parameters</h3>
<p><span class="prev_button"><a class="el" href="ce_define1.html">$define1</a></span><span class="next_button"><a class="el" href="ce_comment.html">Generating Comments</a></span> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="ce.html">Code Engineering</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QM 7.0.1</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2025 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QM 7.0.1</b> &nbsp;|&nbsp; created with <a title="Spexygen: traceable specifications" href="https://github.com/QuantumLeaps/spexygen"><em>Spexygen</em></a>
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
